(()=>{"use strict";var e={};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function t(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i(a.key),a)}}function i(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var r;e.g.importScripts&&(r=e.g.location+"");var t=e.g.document;if(!r&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(r=t.currentScript.src),!r)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&(!r||!/^http(s?):/.test(r));)r=i[a--].src}if(!r)throw new Error("Automatic publicPath is not supported in this browser");r=r.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=r})();var a=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=r,this.card="",this.statusCard=!1,this.cardType="",this.cardTypeColor=""}return r=e,i=[{key:"bindToDom",value:function(){this.element.innerHTML=e.markup}},{key:"getCardNumber",value:function(){var e=this.element.querySelector("form").querySelector("input");this.card=e.value}},{key:"validateAlgorithm",value:function(){var e=this.card.split("").reverse(),r=[];return e.forEach((function(e,t){t%2==1&&(e*=2)>9&&(e-=9),r.push(Number(e))})),r.reduce((function(e,r){return e+r}),0)%10==0&&(this.statusCard=!0)}},{key:"validateCardType",value:function(){if(this.statusCard){var e=this.card.length;if(4===Number(this.card.slice(0,1))&&e>=13&&e<=16)return this.cardType="visa";if(Number(this.card.slice(0,2))>=51&&Number(this.card.slice(0,2))<=55&&16===e)return this.cardType="mastercard";if(["34","37"].includes(this.card.slice(0,2))&&15===e)return this.cardType="american express";if(6011===Number(this.card.slice(0,4))&&16===e)return this.cardType="discover";if(Number(this.card.slice(0,4))>=3528&&Number(this.card.slice(0,4))<=3589&&e>=16&&e<=19)return this.cardType="jcb";if(2===Number(this.card.slice(0,1))&&16===e)return this.cardType="mir";if(3===Number(this.card.slice(0,1))&&e>=14&&e<=16)return this.cardType="diners club"}}},{key:"validateCardColor",value:function(){4===Number(this.card.slice(0,1))?this.cardTypeColor="visa":Number(this.card.slice(0,2))>=51&&Number(this.card.slice(0,2))<=55?this.cardTypeColor="mastercard":["34","37"].includes(this.card.slice(0,2))?this.cardTypeColor="american express":6011===Number(this.card.slice(0,4))?this.cardTypeColor="discover":Number(this.card.slice(0,4))>=3528&&Number(this.card.slice(0,4))<=3589?this.cardTypeColor="jcb":2===Number(this.card.slice(0,1))?this.cardTypeColor="mir":3===Number(this.card.slice(0,1))&&(this.cardTypeColor="diners club")}},{key:"changeColorCard",value:function(){var e=this;this.element.querySelector(".cards").querySelectorAll("div").forEach((function(r){r.classList.add("noactive"),e.cardTypeColor===r.getAttribute("data-card")&&r.classList.remove("noactive")}))}},{key:"findCard",value:function(){var e=this,r=this.element.querySelector("form");r.addEventListener("submit",(function(r){r.preventDefault(),e.getCardNumber(),e.validateAlgorithm(),e.validateCardType();var t=e.element.querySelector("p");t&&t.remove();var i=document.createElement("p");i.innerHTML="Ваша карта принадлежит платеженой системе ".concat(e.cardType.toUpperCase()),e.cardType="",e.element.appendChild(i)})),r.addEventListener("input",(function(){e.getCardNumber(),e.validateCardColor(),e.changeColorCard()}))}}],a=[{key:"markup",get:function(){return'\n        <div class="container">\n        <div class="widget-card">\n          <div class="cards">\n            <div data-card="mir">\n              <img src="./image/mir.svg" alt="Карта MIR" />\n            </div>\n            <div data-card="mastercard">\n              <img src="./image/mastercard.svg" alt="Карта MasterCard" />\n            </div>\n            <div data-card="visa">\n              <img src="./image/visa.svg" alt="Карта Visa" />\n            </div>\n            <div data-card="discover">\n              <img src="./image/discover.svg" alt="Карта Discover" />\n            </div>\n            <div data-card="american express">\n              <img\n                src="./image/american-express.svg"\n                alt="Карта American Express"\n              />\n            </div>\n            <div data-card="jcb">\n              <img src="./image/jcb.svg" alt="Карта JCB" />\n            </div>\n            <div data-card="diners club">\n              <img src="./image/diners-club.svg" alt="Карта Diners Club" />\n            </div>\n          </div>\n          <form action="" class="form">\n            <input type="text" placeholder="Credit number" />\n            <button>Валидация</button>\n          </form>\n        </div>\n      </div>\n        '}}],i&&t(r.prototype,i),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}();e.p,e.p,e.p,e.p,e.p,e.p,e.p,console.log("JS Init"),document.addEventListener("DOMContentLoaded",(function(){var e=new a(document.querySelector(".main"));e.bindToDom(),e.findCard()}))})();